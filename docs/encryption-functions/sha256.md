---
title: SHA256
sidebar_label: SHA256
description: Converte uma string em um hash SHA-2 hexadecimal de 256 bits, √∫til para criar identificadores √∫nicos e verificar integridade de dados.
---

<!-- generated-by-script -->

# SHA256

## Descri√ß√£o

A fun√ß√£o `SHA256` converte uma string em um hash hexadecimal de 256 bits usando o algoritmo SHA-2. √â uma fun√ß√£o de hash unidirecional ‚Äî ou seja, n√£o d√° para "reverter" o hash e descobrir o valor original. Isso √© super √∫til quando voc√™ precisa criar identificadores √∫nicos a partir de dados sens√≠veis (como CPF ou e-mail), comparar valores sem expor a informa√ß√£o real, ou gerar tokens para links seguros em CloudPages. O resultado √© sempre uma string hexadecimal de 64 caracteres.

## Sintaxe

```ampscript
SHA256(stringToConvert, charSet)
```

## Par√¢metros

| Par√¢metro | Tipo | Obrigat√≥rio | Descri√ß√£o |
|------------------|--------|-------------|----------------------------------------------------------------------|
| stringToConvert | String | Sim | A string que voc√™ quer converter em hash SHA-256. |
| charSet | String | N√£o | O conjunto de caracteres para a codifica√ß√£o. O padr√£o √© `UTF-8`. Tamb√©m aceita `UTF-16`. |

## Exemplo b√°sico

```ampscript
%%[
VAR @emailHash
SET @emailHash = SHA256("joao.silva@email.com.br")
]%%

Hash do e-mail: %%=v(@emailHash)=%%
```

**Sa√≠da:**
```
Hash do e-mail: 99d1f7b534824f35dffa18c3b728ecb00c4585ba9d7c9b26205424f8f28eff8e
```

## Exemplo avan√ßado

Imagina que a **Lojas Vit√≥ria** quer criar um link de desconto personalizado para cada cliente na campanha de Dia das M√£es. Para evitar que algu√©m altere o par√¢metro na URL e use o desconto de outro cliente, voc√™ gera um token SHA-256 combinando o CPF com uma chave secreta. Na CloudPage, voc√™ valida o token antes de liberar o cupom.

```ampscript
%%[
VAR @cpf, @chaveSecreta, @stringBase, @token, @linkDesconto

SET @cpf = AttributeValue("CPF")
SET @chaveSecreta = "vitoria-maes-2024-secretkey"

/* Combina CPF + chave secreta para gerar um token √∫nico */
SET @stringBase = Concat(@cpf, "|", @chaveSecreta)
SET @token = SHA256(@stringBase)

/* Monta o link com o CPF e o token para valida√ß√£o */
SET @linkDesconto = Concat(
  "https://www.lojasvitoria.com.br/cupom-maes?cpf=",
  URLEncode(@cpf),
  "&token=",
  @token
)
]%%

Ol√° %%=ProperCase(AttributeValue("PrimeiroNome"))=%%! üå∏

Preparamos um cupom exclusivo de R$50 para voc√™ presentear sua m√£e!

<a href="%%=RedirectTo(@linkDesconto)=%%">Resgatar meu cupom</a>
```

**Sa√≠da:**
```
Ol√° Maria! üå∏

Preparamos um cupom exclusivo de R$50 para voc√™ presentear sua m√£e!

Resgatar meu cupom
(link: https://www.lojasvitoria.com.br/cupom-maes?cpf=123.456.789-00&token=a3f2b8c1d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1)
```

Na CloudPage de valida√ß√£o, voc√™ recalcula o hash e compara:

```ampscript
%%[
VAR @cpfRecebido, @tokenRecebido, @chaveSecreta, @tokenEsperado

SET @cpfRecebido = RequestParameter("cpf")
SET @tokenRecebido = RequestParameter("token")
SET @chaveSecreta = "vitoria-maes-2024-secretkey"

SET @tokenEsperado = SHA256(Concat(@cpfRecebido, "|", @chaveSecreta))

IF @tokenRecebido == @tokenEsperado THEN
]%%
  ‚úÖ Cupom validado! Seu desconto de R$50 foi aplicado.
%%[ ELSE ]%%
  ‚ùå Link inv√°lido. Entre em contato com nosso atendimento.
%%[ ENDIF ]%%
```

### Usando UTF-16

Se voc√™ precisa gerar o hash com codifica√ß√£o UTF-16 (por exemplo, para integrar com um sistema externo que usa esse padr√£o):

```ampscript
%%[
VAR @hashUtf16
SET @hashUtf16 = SHA256("joao.silva@email.com.br", "UTF-16")
]%%

Hash UTF-16: %%=v(@hashUtf16)=%%
```

**Sa√≠da:**
```
Hash UTF-16: 84b87f1ae08610f97a0bb6c228dd2289a54203c23ee2af17d617a1c1b4a0ab1a
```

## Observa√ß√µes

- O SHA-256 √© uma fun√ß√£o de **hash unidirecional** ‚Äî n√£o existe fun√ß√£o nativa no AMPscript para reverter o hash. Isso √© proposital e √© o que torna o hash √∫til para seguran√ßa.
- A mesma string **sempre** gera o mesmo hash. Isso significa que voc√™ pode usar para compara√ß√µes sem armazenar o dado original em texto puro.
- O resultado √© **sempre uma string hexadecimal de 64 caracteres**, independente do tamanho da string de entrada.
- Usar `UTF-8` ou `UTF-16` como charset gera hashes **completamente diferentes** para a mesma string. Garanta que ambos os lados (gera√ß√£o e valida√ß√£o) usem o mesmo charset.
- Se o par√¢metro `charSet` n√£o for informado, o padr√£o √© `UTF-8`.
- **SHA-256 n√£o √© criptografia** ‚Äî √© hashing. Se voc√™ precisa criptografar e depois descriptografar dados, use [EncryptSymmetric](../encryption-functions/encryptsymmetric.md) e [DecryptSymmetric](../encryption-functions/decryptsymmetric.md).
- Para cen√°rios onde a seguran√ßa n√£o √© t√£o cr√≠tica e voc√™ precisa de um hash mais curto, considere [MD5](../encryption-functions/md5.md) (128 bits). Para maior seguran√ßa, use [SHA512](../encryption-functions/sha512.md) (512 bits).
- Cuidado com espa√ßos extras na string! `"joao@email.com"` e `" joao@email.com"` geram hashes totalmente diferentes. Use [Trim](../string-functions/trim.md) antes, se necess√°rio.

## Fun√ß√µes relacionadas

- [MD5](../encryption-functions/md5.md) ‚Äî gera um hash de 128 bits, mais curto por√©m menos seguro
- [SHA1](../encryption-functions/sha1.md) ‚Äî gera um hash SHA-1 de 160 bits
- [SHA512](../encryption-functions/sha512.md) ‚Äî gera um hash SHA-2 de 512 bits, mais seguro que o SHA-256
- [EncryptSymmetric](../encryption-functions/encryptsymmetric.md) ‚Äî criptografa dados de forma revers√≠vel (diferente de hash)
- [DecryptSymmetric](../encryption-functions/decryptsymmetric.md) ‚Äî descriptografa dados criptografados com EncryptSymmetric
- [Concat](../string-functions/concat.md) ‚Äî concatena strings, √∫til para montar a string base antes de gerar o hash
- [Trim](../string-functions/trim.md) ‚Äî remove espa√ßos extras da string antes de aplicar o hash
- [Lowercase](../string-functions/lowercase.md) ‚Äî normaliza a string para min√∫sculas antes do hash, garantindo consist√™ncia
- [URLEncode](../string-functions/urlencode.md) ‚Äî codifica o hash para uso seguro em URLs
- [CloudPagesURL](../sites-functions/cloudpagesurl.md) ‚Äî gera URLs de CloudPages, onde voc√™ pode usar tokens SHA-256 para valida√ß√£o